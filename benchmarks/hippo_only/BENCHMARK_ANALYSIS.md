# 벤치마크 분석: 왜 개선율이 낮은가?

**Date**: 2026-01-20  
**Version**: v0.4.0-alpha

---

## 🔍 문제 진단

### 현재 상태

```
[Baseline PID]
  Drift RMS: 0.481
  Final Error: 0.367

[PID + Hippo Memory]
  Drift RMS: 0.481  (+0.0%)
  Final Error: 0.366 (+0.1%)
```

**개선율이 거의 없음** → Hippo Memory가 효과를 보이지 않음

---

## 🔎 근본 원인 분석

### 1️⃣ 위치 해상도 문제

**문제**:
- 위치 간격이 너무 작음 (0.0, 0.1, 0.2)
- `quantization_level=100`, `phase_wrap=2π` 설정에서
- 위치 0.0과 0.1이 같은 Place ID로 매핑될 수 있음

**확인 필요**:
```python
위치 0.0 -> Place ID ?
위치 0.1 -> Place ID ?
위치 0.2 -> Place ID ?
```

**해결 방안**:
- 위치 간격 증가 (0.0, 1.0, 2.0)
- 또는 `quantization_level` 증가
- 또는 위치별 고유 Place ID 보장

---

### 2️⃣ 편향 저장 조건이 너무 엄격함

**현재 코드**:
```python
if abs(error) < 0.01:  # 안정 구간
    memory.store(...)
```

**문제**:
- PID 제어기로는 `abs(error) < 0.01` 조건이 거의 만족되지 않음
- 편향이 저장되지 않아서 학습이 안 됨

**확인 필요**:
- 실제 에러 분포 확인
- 저장 조건 만족 횟수 확인

**해결 방안**:
- 조건 완화: `abs(error) < 0.1`
- 또는 다른 조건 사용 (속도, 가속도 기반)

---

### 3️⃣ 보정값이 너무 작아서 효과 없음

**문제**:
- 학습된 편향이 작아서 보정 효과가 미미함
- 드리프트가 0.0001 수준인데, 보정값도 비슷한 수준
- 노이즈와 비슷한 크기라 효과가 묻힘

**확인 필요**:
- 실제 보정값 크기 확인
- 드리프트 크기와 비교

**해결 방안**:
- 드리프트 크기 증가 (0.001 수준)
- 또는 보정값 스케일 조정

---

### 4️⃣ 재방문 시나리오가 제대로 작동하지 않음

**문제**:
- 같은 위치를 재방문해도 다른 Place ID로 인식될 수 있음
- 또는 편향이 저장되지 않아서 재방문 시 보정이 없음

**확인 필요**:
- 재방문 시 Place ID가 동일한지
- 재방문 시 기억이 검색되는지
- 재방문 시 보정값이 적용되는지

**해결 방안**:
- 위치 정확도 향상
- Place ID 매핑 로직 수정
- 재방문 시나리오 명확화

---

### 5️⃣ Replay가 제대로 작동하지 않음

**문제**:
- Replay phase에서 학습이 발생하지 않을 수 있음
- 또는 Replay 조건이 만족되지 않음

**확인 필요**:
- Replay가 실제로 실행되는지
- Replay 후 기억이 업데이트되는지
- Consolidation이 발생하는지

**해결 방안**:
- Replay 조건 확인
- Replay 로직 수정
- 디버깅 로그 추가

---

## 🛠️ 즉시 수정 가능한 항목

### 우선순위 1: 편향 저장 조건 완화

```python
# 현재
if abs(error) < 0.01:

# 수정
if abs(error) < 0.1:  # 조건 완화
```

### 우선순위 2: 드리프트 크기 증가

```python
# 현재
drift_rate = 0.0002

# 수정
drift_rate = 0.001  # 5배 증가
```

### 우선순위 3: 위치 간격 증가

```python
# 현재
target_positions = [0.0, 0.1, 0.2, 0.1, 0.0]

# 수정
target_positions = [0.0, 1.0, 2.0, 1.0, 0.0]  # 10배 증가
```

---

## 📊 예상 개선 효과

위 수정 사항 적용 시:

```
[Baseline PID]
  Drift RMS: 0.XXX
  Final Error: 0.XXX

[PID + Hippo Memory]
  Drift RMS: 0.XXX  (-20~30%)
  Final Error: 0.XXX (-20~30%)
```

---

## 🎯 다음 단계

1. ✅ 문제 진단 완료
2. 🔄 수정 사항 적용
3. 🔄 재벤치마크 실행
4. 🔄 결과 분석

---

**Author**: GNJz  
**Made in**: GNJz  
**License**: MIT License

